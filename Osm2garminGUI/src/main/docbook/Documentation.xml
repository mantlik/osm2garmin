<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML 5.0//EN" "http://docbook.org/ns/docbook/DTD/docbook.dtd" >

<book xmlns="http://docbook.org/ns/docbook" 
      xmlns:xi="http://www.w3.org/2001/XInclude"
      version="5.0" xml:id="guide-index">
    <info>
        <title>OpenStreetMap Garmin Maps Generator</title>
        <subtitle>User's guide</subtitle>
        <mediaobject>
            <imageobject>
                <imagedata fileref="splash.png"/>
            </imageobject>
        </mediaobject>
        <copyright>
            <year>      
                <?dbtimestamp format="Y"?>
            </year>
            <holder>RNDr. Frantisek Mantlik</holder>
        </copyright>
    </info>
    <chapter xml:id="getting-started">
        <info>
            <title>Getting started</title>
        </info>
        <section>
            <info>
                <title>Quick start</title>
            </info>
            <para>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="application.png"/>
                    </imageobject>
                </mediaobject>
            </para>
            <itemizedlist>
                <listitem>
                    <para>
                        Click 
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata fileref="Globe32.png"/>
                            </imageobject> 
                        </inlinemediaobject> or select Tools-Options to adjust
                        program settings. Click appropriate tab for desired settings group.
                    </para>
                    <para>
                        Default settings will produce a set of Garmin maps covering the whole globe. You can
                        adjust all settings according to your needs.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Click "Start" to run maps download and generation.                        
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Wait until maps download and creation process is finished. It can take 
                        long time, especially on the first run.                        
                    </para>
                </listitem>
                <listitem>
                    Copy desired maps to the GARMIN folder of the memory card of your Garmin instrument 
                    and/or install maps into MapSource.                    
                </listitem>
                <listitem>
                    <para>
                        Repeat the procedure on regular basis in order to download and process 
                        actualizations of your maps.                        
                    </para>
                </listitem>
            </itemizedlist>
        </section>
    </chapter>
    <chapter xml:id="settings">
        <info>
            <title>Program settings</title>
        </info>
        <section xml:id="sources">
            <info>
                <title>Download sources</title>
            </info>
            <para>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="download_sources.png"/>
                    </imageobject>
                </mediaobject>
            </para>
            <variablelist>
                <varlistentry>
                    <term>SRTM3 download URL</term>
                    <listitem>
                        <para>
                            URL for downloading SRTM data from. If local/company mirror of SRTM3 data
                            is available, default value can be replaced with the mirror. Please note that
                            HTTP protocol only is supported.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Torrents download URL</term>
                    <listitem>
                        <para>
                            URL from where planet file torrents can be downloaded. Under normal circumstances there
                            is no need to change the default value.
                        </para>
                        <para>
                            This option affects BitTorrent download only.                            
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Planet file download mirrors</term>
                    <listitem>
                        <para>
                            List of planet download mirrors for HTTP downloads one per line. Download mirror
                            is randomly selected.
                        </para>
                        <para>
                            This option affects HTTP download only.                            
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Planet update mirrors</term>
                    <listitem>
                        <para>
                            List of mirrors for routine updates one item per line. Update mirrors are randomly
                            selected each run.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Download method</term>
                    <listitem>
                        <para>
                            Select method for initial planet file download. Default method is BitTorrent.                            
                        </para>
                        <para>
                            This option affects initial Planet file download only. Later updates are downloaded
                            from mirror sites with the use of Osmosis tool.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>BitTorrent port range</term>
                    <listitem>
                        <para>
                            Select range of ports used for BitTorrent download. First available port from the
                            range will be used.
                        </para>
                        <para>
                            In order to achieve the best download performance, port accessible from the whole Internet
                            should be selected if possible.
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        <section xml:id="parameters">
            <info>
                <title>Processing parameters</title>
            </info>
            <para>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="parameters.png"/>
                    </imageobject>
                </mediaobject>
            </para>
            <variablelist>
                <varlistentry>
                    <term>Working directory</term>
                    <listitem>
                        <para>
                            Directory for saving all program data. Please note that software needs at least
                            150-200 Gbyte of free space to save all maps data.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Maps directory</term>
                    <listitem>
                        <para>
                            Directory where final maps will be saved. Each region will be saved in a subdirectory
                            named after the particular region.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>SRTM data directory</term>
                    <listitem>
                        <para>
                            Directory where mirror of the SRTM3 data will be saved. If you have a SRTM mirror
                            available in the filesystem, you can point this directory. Data available in this
                            directory will not be downloaded from the Internet.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Contours interval</term>
                    <listitem>
                        <para>
                            Minor, medium and major contours interval. Minor contours are plotted in flat areas
                            only and medium contours are not plotted in high mountains.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Elevation difference threshold</term>
                    <listitem>
                        <para>
                            Elevation difference threshold for each 1x1 degree tile to plot minor resp.
                            medium contours. If the overall elevation difference in the tile exceeds a
                            threshold, corresponding contours are not plotted.
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        <section xml:id="regions">
            <info>
                <title>Regions</title>
            </info>
            <para>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="regions.png"/>
                    </imageobject>
                </mediaobject>
            </para>
            <para>
                Regions table defines individual regions for processing. Each rectangular region is defined
                by a unique name and bounding coordinates.
            </para>
            <para>
                Regions are processed from top to the bottom of the list. You can change the sequence
                with the Move up and Move down buttons. 
            </para>
            <para>
                Display button will open the schematic map of the
                region in the external browser. In addition, HTML page with the region map link is saved
                in the working directory.
            </para>
        </section>
    </chapter>
    <chapter xml:id="headless">
        <info>
            <title>Command-line processing</title>
        </info>
        <para>
            Program offers command-line unattended mode. In this mode, processing
            is performed in a single step with no user intervention.
        </para>
        <para>
            Command-line module is represented by a single <emphasis>jar</emphasis> file available in the
            program distribution:
        </para>
        <programlisting>osm2garmin/modules/org-mantlik-Osm2garminAPI.jar</programlisting>
        <para>
            Simply copy the file to your working directory and run the command
        </para>
        <programlisting>java -Xmx1400m -jar org-mantlik-Osm2garminAPI.jar</programlisting>
        <para>
            On the first run, two files are created, <emphasis>regions.txt</emphasis> and 
            <emphasis>settings.properties</emphasis>.
        </para>
        <para>
            Edit both files to meet your needs and run the program again. The whole
            download and processing cycle will take place.
        </para>
        <para>
            You can repeat the unattended run at any time. Maps updates are downloaded
            and updated versions of maps are prepared.
        </para>
    </chapter>
    <xi:include href="license.xml"/>    
</book>
